{"version":3,"sources":["scripts/main.js"],"names":["tableEl","document","querySelector","tHead","sortTable","element","table","order","index","parentElement","children","indexOf","rows","querySelectorAll","sort","a","b","getNumber","innerText","append","string","parseInt","replace","setOrder","dataset","setActiveRow","clickEvent","activeRow","find","row","classList","contains","remove","target","add","addForm","body","insertAdjacentHTML","addEventListener","e","tagName","tBodies","editableCell","salaryFormEl","ageFormEl","map","el","value","preventDefault","form","submitBtn","formatNumber","number","formattedNumber","Number","toLocaleString","addRow","formElement","tableElement","submitEvent","data","Object","fromEntries","FormData","entries","validateForm","name","position","office","age","salary","reset","pushNotification","formData","length","trim","posTop","posRight","title","description","type","notificationEl","createElement","className","qa","style","top","right","innerHTML","setTimeout","cellElement","text","textContent","isAmount","isOfficeCell","isOffice","selectedCell","isNumberCell","isNumber","input","select","setCellValue","inputElement","validateCellInput","inputEl","isAmountVal","isNumberVal","isNaN","ev","key","focus","setSelectionRange"],"mappings":"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","file":"main.b8f8e4b1.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst tableEl = document.querySelector('table');\nconst tHead = tableEl.querySelector('thead');\n\ntHead.addEventListener('click', (e) => {\n  if (e.target.tagName !== 'TH') {\n    return false;\n  }\n\n  const order = setOrder(e.target);\n\n  sortTable(e.target, tableEl, order);\n});\n\ntableEl.tBodies[0].addEventListener('click', (e) => {\n  if (e.target.parentElement.tagName !== 'TR') {\n    return false;\n  }\n\n  setActiveRow(tableEl, e);\n});\n\ntableEl.tBodies[0].addEventListener('dblclick', (e) => {\n  if (e.target.tagName !== 'TD') {\n    return false;\n  }\n\n  editableCell(e.target);\n});\n\nfunction sortTable(element, table, order) {\n  const index = [...element.parentElement.children].indexOf(element);\n\n  const rows = [...table.querySelectorAll('tbody > tr')];\n\n  rows.sort((a, b) => {\n    if (getNumber(a.children[index].innerText)) {\n      return order === 'ASC'\n        ? getNumber(a.children[index].innerText)\n          - getNumber(b.children[index].innerText)\n        : getNumber(b.children[index].innerText)\n          - getNumber(a.children[index].innerText);\n    }\n\n    if (a.children[index].innerText < b.children[index].innerText) {\n      return order === 'ASC' ? -1 : 1;\n    }\n\n    if (a.children[index].innerText > b.children[index].innerText) {\n      return order === 'ASC' ? 1 : -1;\n    }\n\n    return 0;\n  });\n\n  table.querySelector('tbody').append(...rows);\n}\n\nfunction getNumber(string) {\n  return parseInt(string.replace(/\\D/g, ''));\n}\n\nfunction setOrder(element) {\n  if (!element.dataset.order) {\n    element.dataset.order = 'ASC';\n  } else {\n    element.dataset.order === 'ASC'\n      ? element.dataset.order = 'DESC'\n      : element.dataset.order = 'ASC';\n  }\n\n  return element.dataset.order;\n}\n\nfunction setActiveRow(table, clickEvent) {\n  const rows = [...table.querySelectorAll('tbody > tr')];\n  const activeRow = rows.find((row) => row.classList.contains('active'));\n\n  if (!activeRow) {\n    clickEvent.target.parentElement.classList.add('active');\n  } else {\n    activeRow.classList.remove('active');\n    clickEvent.target.parentElement.classList.add('active');\n  }\n}\n\nfunction addForm() {\n  document.body.insertAdjacentHTML('beforeend', `\n    <form class=\"new-employee-form\">\n      <label>\n        Name:\n        <input\n          name=\"name\"\n          data-qa=\"name\"\n          type=\"text\"\n          required\n        >\n      </label>\n      <label>\n      Position:\n        <input\n          name=\"position\"\n          data-qa=\"position\"\n          type=\"text\"\n          required\n        >\n      </label>\n      <label>\n        Office:\n        <select\n          name=\"office\"\n          data-qa=\"office\"\n          required\n        >\n          <option value=\"Tokyo\">Tokyo</option>\n          <option value=\"Singapore\">Singapore</option>\n          <option value=\"New York\">New York</option>\n          <option value=\"Edinburgh\">Edinburgh</option>\n          <option value=\"San Francisco\">San Francisco</option>\n        </select>\n      </label>\n      <label>\n        Age:\n        <input\n          name=\"age\"\n          data-qa=\"age\"\n          type=\"number\"\n          required\n        >\n      </label>\n      <label>\n        Salary:\n        <input\n          name=\"salary\"\n          data-qa=\"salary\"\n          type=\"number\"\n          required\n        >\n      </label>\n      <button\n        id=\"submit-btn\"\n        type = \"submit\"\n      >\n        Save to table\n      </button>\n    </form>\n  `);\n}\n\naddForm();\n\nconst salaryFormEl = document.querySelector('form input[name=\"salary\"]');\nconst ageFormEl = document.querySelector('form input[name=\"age\"]');\n\n[salaryFormEl, ageFormEl].map((el) => {\n  el.addEventListener('input', () => {\n    el.value = el.value.replace(/\\D/g, '');\n  });\n\n  el.addEventListener('paste', (e) => e.preventDefault);\n});\n\nconst form = document.querySelector('form');\nconst submitBtn = document.querySelector('#submit-btn');\n\nsubmitBtn.addEventListener('click', (e) => {\n  addRow(form, tableEl, e);\n});\n\nfunction formatNumber(number) {\n  let formattedNumber = Number(number).toLocaleString('en-US');\n\n  formattedNumber = '$' + formattedNumber;\n\n  return formattedNumber;\n}\n\nfunction addRow(formElement, tableElement, submitEvent) {\n  const data = Object.fromEntries(new FormData(formElement).entries());\n\n  if (!validateForm(data)) {\n    submitEvent.preventDefault();\n\n    return false;\n  };\n\n  tableElement.tBodies[0].insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${data.name}</td>\n      <td>${data.position}</td>\n      <td>${data.office}</td>\n      <td>${data.age}</td>\n      <td>${formatNumber(data.salary)}</td>\n    </tr>\n  `);\n  submitEvent.preventDefault();\n  form.reset();\n\n  pushNotification(500, 10, 'Success!',\n    'Good!\\n '\n    + 'Employee has been added!', 'success');\n}\n\nfunction validateForm(formData) {\n  if (formData.name.length < 4 || formData.name.trim() === '') {\n    pushNotification(500, 10, 'Error!',\n      `Something went wrong!<br> `\n      + `Name field cannot be empty! Or less then 4 letters!`, 'error');\n\n    return false;\n  }\n\n  if (!formData.position || formData.position.trim() === '') {\n    pushNotification(500, 10, 'Error!',\n      `Something went wrong!<br> `\n      + `Position field cannot be empty!`, 'error');\n\n    return false;\n  }\n\n  if (+formData.age < 18 || +formData.age > 90) {\n    pushNotification(500, 10, 'Error!',\n      `Something went wrong!<br> `\n      + `Age must be more 18 & less 90`, 'error');\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction pushNotification(posTop, posRight, title, description, type = '') {\n  const notificationEl = document.createElement('div');\n\n  notificationEl.className = `notification ${type}`;\n  notificationEl.dataset.qa = 'notification';\n  notificationEl.style.top = `${posTop}px`;\n  notificationEl.style.right = `${posRight}px`;\n\n  notificationEl.innerHTML = `\n    <h2 class=\"title\">${title}</h2>\n    <p>${description}</p>\n  `;\n\n  document.body.append(notificationEl);\n\n  setTimeout(() => notificationEl.remove(), 4000);\n};\n\nfunction editableCell(cellElement) {\n  let text = cellElement.textContent.trim();\n\n  let isAmount = false;\n  const isOfficeCell = isOffice(cellElement);\n  const isNumberCell = isNumber(cellElement);\n\n  if (text[0] === '$') {\n    isAmount = true;\n    text = parseInt(text.replace(/\\D/g, ''));\n  }\n\n  cellElement.textContent = null;\n\n  if (isOfficeCell) {\n    cellElement.insertAdjacentHTML('beforeend', `\n      <select id = \"cell-select\">\n        <option\n          value=\"Tokyo\"\n          ${text === 'Tokyo' ? 'selected' : ''}\n        >\n          Tokyo\n        </option>\n        <option\n          value=\"Singapore\"\n          ${text === 'Singapore' ? 'selected' : ''}\n        >\n          Singapore\n        </option>\n        <option\n          value=\"New York\"\n          ${text === 'New York' ? 'selected' : ''}\n        >\n          New York\n        </option>\n        <option\n          value=\"Edinburgh\"\n          ${text === 'Edinburgh' ? 'selected' : ''}\n        >\n          Edinburgh\n        </option>\n        <option\n          value=\"San Francisco\"\n          ${text === 'San Francisco' ? 'selected' : ''}\n        >\n          San Francisco\n        </option>\n      </select>\n    `);\n  } else {\n    cellElement.insertAdjacentHTML('beforeend', `\n      <input\n        class = \"cell-input\"\n        value = \"${text}\"\n      >\n    `);\n  }\n\n  const input = document.querySelector('.cell-input');\n  const select = document.querySelector('#cell-select');\n\n  if (input) {\n    input.addEventListener('blur', () => {\n      if (!input.value || input.value.trim() === '') {\n        input.value = text;\n      }\n\n      if (validateCellInput(input, isAmount, isNumberCell)) {\n        setCellValue(input, isAmount);\n      } else {\n        input.value = text;\n        setCellValue(input, isAmount);\n      }\n    });\n\n    input.addEventListener('keypress', (ev) => {\n      if (ev.key === 'Enter') {\n        if (!input.value || input.value.trim() === '') {\n          input.value = text;\n        }\n\n        if (validateCellInput(input, isAmount, isNumberCell)) {\n          setCellValue(input, isAmount);\n        } else {\n          input.value = text;\n          setCellValue(input, isAmount);\n        }\n      }\n\n      if (isNumberCell) {\n        input.addEventListener('input', () => {\n          input.value = input.value.replace(/\\D/g, '');\n        });\n      }\n    });\n\n    input.focus();\n    input.setSelectionRange(input.value.length, input.value.length);\n  }\n\n  if (select) {\n    select.focus();\n\n    select.addEventListener('blur', () => {\n      setCellValue(select, isAmount);\n    });\n  }\n\n  function setCellValue(inputElement, isAmountValue = false) {\n    inputElement.parentElement.innerHTML = isAmount\n      ? `$${Number(inputElement.value.trim()).toLocaleString('en-US')}`\n      : inputElement.value.trim();\n  }\n\n  function isOffice(selectedCell) {\n    if (selectedCell === selectedCell.parentElement.children[2]) {\n      return true;\n    }\n\n    return false;\n  }\n\n  function isNumber(selectedCell) {\n    if (selectedCell === selectedCell.parentElement.children[3]\n      || selectedCell === selectedCell.parentElement.children[4]) {\n      return true;\n    }\n\n    return false;\n  }\n\n  function validateCellInput(inputEl, isAmountVal, isNumberVal) {\n    if (inputEl.value.length < 4 && !isNumberVal) {\n      pushNotification(500, 10, 'Error!',\n        'Bad!\\n '\n        + 'Value must be longer than 3 char', 'error');\n\n      return false;\n    }\n\n    if (isNumberVal && !isAmountVal) {\n      if (+inputEl.value < 18 || +inputEl.value > 90 || isNaN(+inputEl.value)) {\n        pushNotification(500, 10, 'Error!',\n          'Bad!\\n '\n          + 'Age must be more than 18 & less 90', 'error');\n\n        return false;\n      }\n    }\n\n    if ((isAmountVal && +inputEl.value === 0) || isNaN(+inputEl.value)) {\n      pushNotification(500, 10, 'Error!',\n        'Bad!\\n '\n        + 'Salary must be more than 0!', 'error');\n\n      return false;\n    }\n\n    return true;\n  }\n}\n"]}